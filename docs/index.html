<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>roletalk</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">roletalk</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>roletalk</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#roletalk" id="roletalk" style="color: inherit; text-decoration: none;">
					<h1>ROLETALK</h1>
				</a>
				<!-- vscode-markdown-toc -->
				<ul>
					<li><a href="#Overview"> Overview</a></li>
					<li><a href="#API">API</a></li>
					<li><a href="#Usecase"> Use case</a></li>
					<li><a href="#Features"> Features</a></li>
					<li><a href="#Concept"> Concept</a><ul>
							<li><a href="#Structure"> Structure</a></li>
							<li><a href="#Communication"> Communication</a></li>
							<li><a href="#Datatypes"> Data types</a></li>
							<li><a href="#Acquaintance"> Acquaintance</a></li>
							<li><a href="#Security"> Security</a></li>
						</ul>
					</li>
					<li><a href="#Contribution"> Contribution</a></li>
				</ul>
				<!-- vscode-markdown-toc-config
    numbering=false
    autoSave=true
    /vscode-markdown-toc-config -->
				<!-- /vscode-markdown-toc -->
				<a href="#a-nameoverviewa-overview" id="a-nameoverviewa-overview" style="color: inherit; text-decoration: none;">
					<h2><a name='Overview'></a> Overview</h2>
				</a>
				<p>Roletalk is peer-to-peer communication framework for microservices; asynchronous and event-driven.
				Developed in honor of scalability, simplicity and efficiency.</p>
				<p>Essentially, it is peer-to-service framework, which allows you to create multiple services (roles) on single peer and communicate to them with ease.</p>
				<p>Roletalk internally uses Websocket for data transferring as TCP framing tool with minimal network overhead.
				Currently there is corresponding wire-compatible GO framework.</p>
				<a href="#a-nameapiaapi" id="a-nameapiaapi" style="color: inherit; text-decoration: none;">
					<h2><a name='API'></a>API</h2>
				</a>
				<p><a href="api/README.md">API</a> is generated directly from source with <a href="https://typedoc.org">TypeDoc</a></p>
				<a href="#a-nameusecasea-use-case" id="a-nameusecasea-use-case" style="color: inherit; text-decoration: none;">
					<h2><a name='Usecase'></a> Use case</h2>
				</a>
				<p>Choose roletalk if you need to build brokerless architecture. Such approach brings some advantages: minimal RTT (round-trip time), less network transferring, no SPOF (single point of failure). In some scenarios broker can be a bottleneck also.</p>
				<p>Roletalk lets you implement flexible communication patterns:</p>
				<ul>
					<li>Publish-Subscribe,</li>
					<li>Remote Procedure Call (RPC),</li>
					<li>Event (single message with optional payload),</li>
					<li>Pipeline (sequental distributed data processing),</li>
					<li>Bus (many-to-many communication),</li>
					<li>Survey (request-reply to multiple peers).</li>
				</ul>
				<a href="#a-namefeaturesa-features" id="a-namefeaturesa-features" style="color: inherit; text-decoration: none;">
					<h2><a name='Features'></a> Features</h2>
				</a>
				<p>• Client as service.
					No matter who establishes connection. Both listener and dialer of a socket are services.
					It allows you to deploy services not exposing them to the Internet or behind private network etc.
				Of course such instances should connect to listeners they have network access to.</p>
				<p>• Automatic service-recognition. Just connect peers together and each of them will know each about other&#39;s roles (services), IDs, names and meta info.
				If peer&#39;s role gets disabled or enabled each connected peer immediately gets informed and rebuilds its internal state.</p>
				<p>• Redunant connections support. There could be multiple connections between two peers. All communication is load-balanced between them.
				With auto-reconnection this can be useful to keep connected two peers which are in case of one peer&#39;s IP address is changed.</p>
				<p>• Binary streams. Transfer large or unknown amounts of data via streams.</p>
				<p>• Round-robin client-side load balancing between units implementing a role (service);</p>
				<p>• No internal heavy message conversions (json/xml serialization/parsing). Just binary to utf-8/int and vice-versa.</p>
				<p>• Optional TLS on transport layer.</p>
				<p>• Scalable and simple in-built authentication: each peer can have zero or multiple ID:KEY combinations.</p>
				<a href="#a-nameconcepta-concept" id="a-nameconcepta-concept" style="color: inherit; text-decoration: none;">
					<h2><a name='Concept'></a> Concept</h2>
				</a>
				<a href="#a-namestructurea-structure" id="a-namestructurea-structure" style="color: inherit; text-decoration: none;">
					<h3><a name='Structure'></a> Structure</h3>
				</a>
				<p>Roletalk concept consists of:</p>
				<ul>
					<li><b>Peer</b> - local node in your peer-to-peer architecture. Peer can have Units, Roles and Destinations.</li>
					<li><b>Unit</b> - remote node connected to the Peer</li>
					<li><b>Connection</b> - communication link between Peer and Unit. Each Unit can have one or more connections. If there are redunant connection, communications is load-balanced between them: checking which of them is not busy or choosing random one if no vacant one found. In case of last connection gets aborted Unit gets closed and removed from the Peer</li>
					<li><b>Role</b> - service registered on Peer. Role can have handlers for each communication type. Role can be <b>active</b> or <b>inactive</b>. When role changes its state all connected units get informed to rebuild their state</li>
					<li><b>Destination</b> - role registered on Units. Destination includes all connected units which serve corresponding role. If last Unit gets disconnected or disables the role, Destinations gets closed.
					All communications is performed via Destinations&#39;s methods and is load-balanced among its Units unless Unit is explicitly specified. Unit is chosen for each message / request / stream. </li>
				</ul>
				<a href="#a-namecommunicationa-communication" id="a-namecommunicationa-communication" style="color: inherit; text-decoration: none;">
					<h3><a name='Communication'></a> Communication</h3>
				</a>
				<p>Roletalk defines three types of communication:</p>
				<ul>
					<li><b>Message</b> - one-way act of communication. Should be used when no delivery acknowledgement is needed. Successfully sent message means that it has been written to underlying socket</li>
					<li><b>Request</b> - request in common meaning. Request can only be rejected or replied. Returns error when Unit rejects it, timeout exceeds or Unit disconnects after request was sent.</li>
					<li><b>Stream</b> - one-way stream of binary data. Streams can be <b>Readable</b> and <b>Writable</b>. If Peer calls Readable (<code>Destination.Readable()</code>) then Units handle Writable (<code>Role.OnWritable()</code>) and vice-versa. Stream sessions begin with Request. After Unit replied for request, data is transferred over connection used for the reply. If  connection aborts stream destroys.</li>
				</ul>
				<p>Incoming messages are wrapped in <b>Context</b> - object with payload and meta info for all types of incoming messages (message, request, request for stream). </p>
				<p>All communication is performed with two basic properties: <b>Role</b> and <b>Event</b> (name of action. Some synonyms in other frameworks: method, path, action) to identify which handler to call.
				When Unit gets message it forwards it to corresponding role or rejects it if such role isn&#39;t specified on the Peer. If role has no handlers for event it rejects it, otherwise call handlers.</p>
				<a href="#a-namedatatypesa-data-types" id="a-namedatatypesa-data-types" style="color: inherit; text-decoration: none;">
					<h3><a name='Datatypes'></a> Data types</h3>
				</a>
				<p>Roletalk uses six data types:</p>
				<ul>
					<li><b>Binary</b> - <code>Buffer</code></li>
					<li><b>Null</b> - <code>null</code></li>
					<li><b>Bool</b> - <code>boolean</code></li>
					<li><b>String</b> - <code>string</code></li>
					<li><b>Number</b> - <code>number</code></li>
					<li><b>Object</b> - <code>Object</code></li>
				</ul>
				<p>All communication (except stream sessions) can use data of any type. Type of data should be chosen on stage of designing microservice specification or retrieved by calling Context methods.</p>
				<a href="#a-nameacquaintancea-acquaintance" id="a-nameacquaintancea-acquaintance" style="color: inherit; text-decoration: none;">
					<h3><a name='Acquaintance'></a> Acquaintance</h3>
				</a>
				<p>One aditional feature of roletalk is acquaintance. It is could be considered as redunant but it nicely fits the use case of frameworks.</p>
				<p>The process of it is simple. You have listener PEER_A which is connected to listener PEER_B. After some PEER_C has connected to PEER_A, PEER_A will send to PEER_C info {ID, ADDRESS, ROLES} of PEER_A. If PEER_C is FRIENDLY, has one or more destination from received ROLES and PEER_C is not connected to peer with provided ID it will start connection to the ADDRESS</p>
				<p>Acquantance is enabled by default, but you can set Friendly option to FALSE to disable is.</p>
				<a href="#a-namesecuritya-security" id="a-namesecuritya-security" style="color: inherit; text-decoration: none;">
					<h3><a name='Security'></a> Security</h3>
				</a>
				<p>To achieve strong MITM-protection use HTTPS.</p>
				<p>Framework is provided with simple in-built authentication mechanism: preshared ID:KEY pairs. Peers which are supposed to be connected should have at least one common ID:KEY pair.</p>
				<p>The authentication process between two peers can be described in a simple few steps:</p>
				<ol>
					<li><p>Each peer sends a list of his auth ID&#39;s and randomly generated CHALLENGE to another. If no auth ID:KEY specified peer sends auth confirmation.</p>
					</li>
					<li><p>Each peer checks if locally registered list of ID&#39;s intersects with the one received from remote peer. If no ID matched, sends error and closes conenctions with corresponding code.</p>
					</li>
					<li><p>Each peer chooses random intersected ID and hashes received CHALLENGE with corresponding KEY for that ID. Sends hashed RESPONSE value in pair with that ID.</p>
					</li>
					<li><p>Each peer receives RESPONSE with ID and checks if CHALLENGE hashed with corresponding KEY of received ID equals received RESPONSE. In such case sends auth confirmation. Else rejects auth and closes connection.</p>
					</li>
					<li><p>In case of both peers confirm each others&#39;s RESPONSES the handshake process is complete and then connections take part in futher communication. If auth exceeds timeout or some peer sends error and/or closes connection handshake fails.</p>
					</li>
				</ol>
				<a href="#a-namecontributiona-contribution" id="a-namecontributiona-contribution" style="color: inherit; text-decoration: none;">
					<h2><a name='Contribution'></a> Contribution</h2>
				</a>
				<p>Project is MIT-licensed. </p>
				<p>Feel free to open issues and fork. </p>
				<p>If you have any ideas or remarks you are welcome to contact the author.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/destination.html" class="tsd-kind-icon">Destination</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/peer.html" class="tsd-kind-icon">Peer</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/role.html" class="tsd-kind-icon">Role</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/unit.html" class="tsd-kind-icon">Unit</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/context.html" class="tsd-kind-icon">Context</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/contextforreadable.html" class="tsd-kind-icon">Context<wbr>For<wbr>Readable</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/contextforwritable.html" class="tsd-kind-icon">Context<wbr>For<wbr>Writable</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/listenoptions.html" class="tsd-kind-icon">Listen<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/messageoptions.html" class="tsd-kind-icon">Message<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/peerconstructoroptions.html" class="tsd-kind-icon">Peer<wbr>Constructor<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/peermetadata.html" class="tsd-kind-icon">Peer<wbr>Meta<wbr>Data</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#messagehandler" class="tsd-kind-icon">Message<wbr>Handler</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#readablehandler" class="tsd-kind-icon">Readable<wbr>Handler</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#requestcallbackfunction" class="tsd-kind-icon">Request<wbr>Callback<wbr>Function</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#requesthandler" class="tsd-kind-icon">Request<wbr>Handler</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#writablehandler" class="tsd-kind-icon">Writable<wbr>Handler</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#sendabledata" class="tsd-kind-icon">sendable<wbr>Data</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#singleton" class="tsd-kind-icon">Singleton</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>